# è®¾ç½®é¡µé¢è·³è½¬åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

å®ç°äº†ä»ä¸ªäººä¸­å¿ƒé¡µé¢è·³è½¬åˆ°è®¾ç½®é¡µé¢çš„åŠŸèƒ½ï¼Œè®¾ç½®é¡µé¢é…ç½®ä¸º**åˆ†åŒ…åŠ è½½**ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šä»è¿œç¨‹æœåŠ¡å™¨åŠ¨æ€åŠ è½½ã€‚

## æŠ€æœ¯å®ç°

### 1. å¯¼èˆªç»“æ„

```
App.tsx
 â””â”€â”€ NavigationContainer
      â””â”€â”€ RootNavigator (Native Stack)
           â”œâ”€â”€ MainTabs (Tab Navigator) - ä¸»åŒ…
           â”‚    â”œâ”€â”€ Home (é¦–é¡µ)
           â”‚    â”œâ”€â”€ Explore (åœˆå­)
           â”‚    â”œâ”€â”€ Notifications (é€šçŸ¥)
           â”‚    â””â”€â”€ Profile (ä¸ªäººä¸­å¿ƒ)
           â””â”€â”€ Settings (è®¾ç½®é¡µé¢) - åˆ†åŒ… ğŸ“¦
```

### 2. å…³é”®æ–‡ä»¶

#### [src/navigation/RootNavigator.tsx](src/navigation/RootNavigator.tsx)

- åˆ›å»ºæ ¹å¯¼èˆªå™¨ï¼ŒåŒ…å« Tab å¯¼èˆªå’Œè®¾ç½®é¡µé¢
- ä½¿ç”¨ `React.lazy` åŠ¨æ€å¯¼å…¥ SettingsScreen
- é…ç½® `webpackChunkName: "settings"` å°†è®¾ç½®é¡µé¢æ‰“åŒ…ä¸ºç‹¬ç«‹åˆ†åŒ…

```typescript
// åˆ†åŒ…ï¼šè®¾ç½®é¡µé¢ï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰
const SettingsScreen = React.lazy(
  () => import(/* webpackChunkName: "settings" */ '../screens/SettingsScreen'),
);
```

#### [src/screens/ProfileScreen.tsx](src/screens/ProfileScreen.tsx)

- åœ¨"è®¾ç½®"èœå•é¡¹æ·»åŠ ç‰¹æ®Šå¤„ç†
- ç‚¹å‡»"è®¾ç½®"æ—¶è°ƒç”¨ `navigation.navigate('Settings')` è·³è½¬åˆ°åˆ†åŒ…é¡µé¢

```typescript
const handleMenuPress = (title: string) => {
  // ç‰¹æ®Šå¤„ç†ï¼šè®¾ç½®èœå•è·³è½¬åˆ°åˆ†åŒ…é¡µé¢
  if (title === 'è®¾ç½®') {
    navigation.navigate('Settings');
    return;
  }

  // å…¶ä»–èœå•æ˜¾ç¤º Toast
  toastRef.current?.show({
    type: 'text',
    message: `ç‚¹å‡»äº†${title}`,
    duration: 1500,
  });
};
```

#### [src/screens/SettingsScreen.tsx](src/screens/SettingsScreen)

- åˆ†åŒ…é¡µé¢ï¼Œä½¿ç”¨ Zustand ç®¡ç†å…¨å±€çŠ¶æ€
- æ”¯æŒæ·±è‰²æ¨¡å¼å’Œé€šçŸ¥è®¾ç½®
- çŠ¶æ€ä¸ä¸»åŒ…å…±äº«ï¼Œä¿®æ”¹åè¿”å›ä¸»åŒ…å¯ä»¥çœ‹åˆ°çŠ¶æ€åŒæ­¥

### 3. ç±»å‹å®‰å…¨

ä½¿ç”¨ TypeScript å’Œ React Navigation çš„ç±»å‹ç³»ç»Ÿç¡®ä¿ç±»å‹å®‰å…¨ï¼š

```typescript
type ProfileScreenProps = CompositeScreenProps<
  BottomTabScreenProps<TabParamList, 'Profile'>,
  NativeStackScreenProps<RootStackParamList, keyof RootStackParamList>
>;
```

è¿™å…è®¸ ProfileScreen åŒæ—¶æ”¯æŒï¼š

- Tab Navigator çš„å¯¼èˆªï¼ˆåº•éƒ¨æ ‡ç­¾åˆ‡æ¢ï¼‰
- Stack Navigator çš„å¯¼èˆªï¼ˆè·³è½¬åˆ°è®¾ç½®é¡µé¢ï¼‰

## ä½¿ç”¨æ–¹æ³•

### ç”¨æˆ·æ“ä½œ

1. æ‰“å¼€åº”ç”¨ï¼Œåˆ‡æ¢åˆ°"æˆ‘çš„"æ ‡ç­¾é¡µ
2. ç‚¹å‡»"è®¾ç½®"èœå•é¡¹
3. åº”ç”¨ä¼šåŠ¨æ€åŠ è½½è®¾ç½®é¡µé¢åˆ†åŒ…
4. åœ¨è®¾ç½®é¡µé¢ä¿®æ”¹æ·±è‰²æ¨¡å¼æˆ–é€šçŸ¥è®¾ç½®
5. è¿”å›ä¸ªäººä¸­å¿ƒï¼ŒçŠ¶æ€ä¼šè‡ªåŠ¨åŒæ­¥

### å¼€å‘ç¯å¢ƒ

- å¼€å‘ç¯å¢ƒä¸‹ï¼Œåˆ†åŒ…ä»æœ¬åœ° DevServer åŠ è½½
- æ— éœ€é¢å¤–é…ç½®ï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•

### ç”Ÿäº§ç¯å¢ƒ

- ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œåˆ†åŒ…ä»è¿œç¨‹æœåŠ¡å™¨åŠ è½½
- éœ€è¦åœ¨è¿œç¨‹é…ç½®ä¸­æ·»åŠ  `settings` åˆ†åŒ…çš„ URL
- åˆ†åŒ…æ–‡ä»¶åï¼š`settings.android.bundle` æˆ– `settings.ios.bundle`

## åˆ†åŒ…é…ç½®

### è¿œç¨‹é…ç½®ç¤ºä¾‹

éœ€è¦åœ¨è¿œç¨‹æœåŠ¡å™¨ï¼ˆå¦‚ Gitee Releasesï¼‰æä¾›ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "settings": {
    "url": "https://gitee.com/xxx/releases/download/v1.0.0/settings.android.bundle",
    "version": "1.0.0"
  }
}
```

### éªŒè¯åˆ†åŒ…

æ„å»ºåæ£€æŸ¥åˆ†åŒ…æ–‡ä»¶æ˜¯å¦ç”Ÿæˆï¼š

```bash
# Android
ls -la android/app/build/generated/assets/react/release/
# åº”è¯¥çœ‹åˆ°: settings.android.bundle

# iOS
ls -la ios/build/Build/Intermediates.noarchive/
# åº”è¯¥çœ‹åˆ°: settings.ios.bundle
```

## ä¼˜åŠ¿

1. **æŒ‰éœ€åŠ è½½**ï¼šè®¾ç½®é¡µé¢åªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰åŠ è½½
2. **è¿œç¨‹æ›´æ–°**ï¼šå¯ä»¥å•ç‹¬æ›´æ–°è®¾ç½®é¡µé¢è€Œæ— éœ€é‡æ–°å‘å¸ƒåº”ç”¨
3. **çŠ¶æ€å…±äº«**ï¼šä½¿ç”¨ Zustand å®ç°ä¸»åŒ…å’Œåˆ†åŒ…ä¹‹é—´çš„çŠ¶æ€å…±äº«
4. **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
5. **ç”¨æˆ·ä½“éªŒ**ï¼šé¦–æ¬¡åŠ è½½æ—¶æ˜¾ç¤º Loading çŠ¶æ€ï¼Œé¿å…ç™½å±

## æ³¨æ„äº‹é¡¹

1. **åˆ†åŒ…é¡µé¢ä¸èƒ½ä½œä¸ºé¦–é¡µ**ï¼šé¦–é¡µå¿…é¡»åœ¨ä¸»åŒ…ä¸­ä»¥ç¡®ä¿å¿«é€Ÿå¯åŠ¨
2. **ç½‘ç»œä¾èµ–**ï¼šç”Ÿäº§ç¯å¢ƒä¸‹éœ€è¦ç½‘ç»œè¿æ¥æ‰èƒ½åŠ è½½åˆ†åŒ…
3. **ç‰ˆæœ¬ç®¡ç†**ï¼šæ›´æ–°åˆ†åŒ…æ—¶éœ€è¦æ­£ç¡®é…ç½®ç‰ˆæœ¬å·
4. **å›é€€ç­–ç•¥**ï¼šå»ºè®®åœ¨åˆ†åŒ…åŠ è½½å¤±è´¥æ—¶æä¾›å‹å¥½çš„é”™è¯¯æç¤º

## åç»­æ‰©å±•

å¯ä»¥æŒ‰ç…§ç›¸åŒçš„æ–¹å¼æ·»åŠ æ›´å¤šåˆ†åŒ…é¡µé¢ï¼š

```typescript
// æ·»åŠ æ›´å¤šåˆ†åŒ…
const AboutScreen = React.lazy(
  () => import(/* webpackChunkName: "about" */ '../screens/AboutScreen'),
);

const PrivacyScreen = React.lazy(
  () => import(/* webpackChunkName: "privacy" */ '../screens/PrivacyScreen'),
);
```

ç„¶ååœ¨ RootNavigator ä¸­æ³¨å†Œå³å¯ã€‚
